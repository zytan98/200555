{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\n\nvar WebGPUFramebuffer = /*#__PURE__*/function () {\n  function WebGPUFramebuffer(engine, options) {\n    _classCallCheck(this, WebGPUFramebuffer);\n\n    this.engine = engine;\n    this.options = options;\n    this.colorTexture = void 0;\n    this.depthTexture = void 0;\n    this.width = 0;\n    this.height = 0;\n    var _options = options,\n        width = _options.width,\n        height = _options.height,\n        color = _options.color,\n        colors = _options.colors,\n        depth = _options.depth,\n        stencil = _options.stencil;\n\n    if (color) {\n      this.colorTexture = color;\n    }\n\n    if (depth) {\n      this.depthTexture = depth;\n    } // TODO: depth & stencil\n\n  }\n\n  _createClass(WebGPUFramebuffer, [{\n    key: \"get\",\n    value: function get() {\n      var _this$colorTexture, _this$depthTexture;\n\n      return {\n        color: (_this$colorTexture = this.colorTexture) === null || _this$colorTexture === void 0 ? void 0 : _this$colorTexture.get(),\n        depth: (_this$depthTexture = this.depthTexture) === null || _this$depthTexture === void 0 ? void 0 : _this$depthTexture.get()\n      };\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this$colorTexture2, _this$depthTexture2;\n\n      (_this$colorTexture2 = this.colorTexture) === null || _this$colorTexture2 === void 0 ? void 0 : _this$colorTexture2.destroy();\n      (_this$depthTexture2 = this.depthTexture) === null || _this$depthTexture2 === void 0 ? void 0 : _this$depthTexture2.destroy();\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(_ref) {\n      var width = _ref.width,\n          height = _ref.height;\n\n      if (width !== this.width || height !== this.height) {\n        var _this$colorTexture3, _this$depthTexture3;\n\n        (_this$colorTexture3 = this.colorTexture) === null || _this$colorTexture3 === void 0 ? void 0 : _this$colorTexture3.resize({\n          width: width,\n          height: height\n        });\n        (_this$depthTexture3 = this.depthTexture) === null || _this$depthTexture3 === void 0 ? void 0 : _this$depthTexture3.resize({\n          width: width,\n          height: height\n        });\n      }\n\n      this.width = width;\n      this.height = height;\n    }\n  }]);\n\n  return WebGPUFramebuffer;\n}();\n\nexport { WebGPUFramebuffer as default };","map":{"version":3,"sources":["../../src/webgpu/WebGPUFramebuffer.ts"],"names":["WebGPUFramebuffer","colorTexture","depthTexture","width","height","engine","options","color","colors","depth","stencil"],"mappings":";;;IAUqBA,iB;AAMnB,WAAA,iBAAA,CAAA,MAAA,EAAA,OAAA,EAGE;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,iBAAA,CAAA;;AAAA,SAFQK,MAER,GAFQA,MAER;AAAA,SADQC,OACR,GADQA,OACR;AAAA,SARML,YAQN,GAAA,KAAA,CAAA;AAAA,SAPMC,YAON,GAAA,KAAA,CAAA;AAAA,SANMC,KAMN,GANsB,CAMtB;AAAA,SALMC,MAKN,GALuB,CAKvB;AAAA,QAAA,QAAA,GAAA,OAAA;AAAA,QACQD,KADR,GAAA,QAAA,CAAA,KAAA;AAAA,QACeC,MADf,GAAA,QAAA,CAAA,MAAA;AAAA,QACuBG,KADvB,GAAA,QAAA,CAAA,KAAA;AAAA,QAC8BC,MAD9B,GAAA,QAAA,CAAA,MAAA;AAAA,QACsCC,KADtC,GAAA,QAAA,CAAA,KAAA;AAAA,QAC6CC,OAD7C,GAAA,QAAA,CAAA,OAAA;;AAEA,QAAA,KAAA,EAAW;AACT,WAAA,YAAA,GAAA,KAAA;AACD;;AACD,QAAA,KAAA,EAAW;AACT,WAAA,YAAA,GAAA,KAAA;AANF,KAAA,CAQA;;AACD;;;;0BAEY;AAAA,UAAA,kBAAA,EAAA,kBAAA;;AACX,aAAO;AACLH,QAAAA,KAAK,EAAA,CAAA,kBAAA,GAAE,KAAF,YAAA,MAAA,IAAA,IAAA,kBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAE,kBAAA,CADF,GACE,EADF;AAELE,QAAAA,KAAK,EAAA,CAAA,kBAAA,GAAE,KAAF,YAAA,MAAA,IAAA,IAAA,kBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAE,kBAAA,CAAA,GAAA;AAFF,OAAP;AAID;;;8BAEgB;AAAA,UAAA,mBAAA,EAAA,mBAAA;;AACf,OAAA,mBAAA,GAAA,KAAA,YAAA,MAAA,IAAA,IAAA,mBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,mBAAA,CAAA,OAAA,EAAA;AACA,OAAA,mBAAA,GAAA,KAAA,YAAA,MAAA,IAAA,IAAA,mBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,mBAAA,CAAA,OAAA,EAAA;AACD;;;iCAEmE;AAAA,UAApDN,KAAoD,GAAA,IAAA,CAApDA,KAAoD;AAAA,UAA7CC,MAA6C,GAAA,IAAA,CAA7CA,MAA6C;;AAClE,UAAID,KAAK,KAAK,KAAVA,KAAAA,IAAwBC,MAAM,KAAK,KAAvC,MAAA,EAAoD;AAAA,YAAA,mBAAA,EAAA,mBAAA;;AAClD,SAAA,mBAAA,GAAA,KAAA,YAAA,MAAA,IAAA,IAAA,mBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,mBAAA,CAAA,MAAA,CAA0B;AAAED,UAAAA,KAAK,EAAP,KAAA;AAASC,UAAAA,MAAM,EAANA;AAAT,SAA1B,CAAA;AACA,SAAA,mBAAA,GAAA,KAAA,YAAA,MAAA,IAAA,IAAA,mBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,mBAAA,CAAA,MAAA,CAA0B;AAAED,UAAAA,KAAK,EAAP,KAAA;AAASC,UAAAA,MAAM,EAANA;AAAT,SAA1B,CAAA;AACD;;AACD,WAAA,KAAA,GAAA,KAAA;AACA,WAAA,MAAA,GAAA,MAAA;AACD;;;;;;SAvCkBJ,iB","sourcesContent":["import {\n  gl,\n  IFramebuffer,\n  IFramebufferInitializationOptions,\n  IRenderbuffer,\n  ITexture2D,\n} from '@antv/g-webgpu-core';\nimport { WebGPUEngine } from '.';\nimport WebGPUTexture2D from './WebGPUTexture2D';\n\nexport default class WebGPUFramebuffer implements IFramebuffer {\n  private colorTexture: WebGPUTexture2D | null;\n  private depthTexture: WebGPUTexture2D | null;\n  private width: number = 0;\n  private height: number = 0;\n\n  constructor(\n    private engine: WebGPUEngine,\n    private options: IFramebufferInitializationOptions,\n  ) {\n    const { width, height, color, colors, depth, stencil } = options;\n    if (color) {\n      this.colorTexture = color as WebGPUTexture2D;\n    }\n    if (depth) {\n      this.depthTexture = depth as WebGPUTexture2D;\n    }\n    // TODO: depth & stencil\n  }\n\n  public get() {\n    return {\n      color: this.colorTexture?.get(),\n      depth: this.depthTexture?.get(),\n    };\n  }\n\n  public destroy() {\n    this.colorTexture?.destroy();\n    this.depthTexture?.destroy();\n  }\n\n  public resize({ width, height }: { width: number; height: number }) {\n    if (width !== this.width || height !== this.height) {\n      this.colorTexture?.resize({ width, height });\n      this.depthTexture?.resize({ width, height });\n    }\n    this.width = width;\n    this.height = height;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}