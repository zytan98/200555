{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport { isString } from '@antv/util';\nimport insertCss from 'insert-css';\nimport Base from '../base';\ninsertCss(\"\\n  .g6-component-contextmenu {\\n    border: 1px solid #e2e2e2;\\n    border-radius: 4px;\\n    font-size: 12px;\\n    color: #545454;\\n    background-color: rgba(255, 255, 255, 0.9);\\n    padding: 10px 8px;\\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\\n  }\\n  .g6-contextmenu-ul {\\n    padding: 0;\\n    margin: 0;\\n    list-style: none;\\n  }\\n\\n\");\n\nvar Menu =\n/** @class */\nfunction (_super) {\n  __extends(Menu, _super);\n\n  function Menu() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Menu.prototype.getDefaultCfgs = function () {\n    return {\n      offsetX: 6,\n      offsetY: 6,\n      handleMenuClick: undefined,\n      // 指定菜单内容，function(e) {...}\n      getContent: function getContent(e) {\n        return \"\\n          <ul class='g6-contextmenu-ul'>\\n            <li>\\u83DC\\u5355\\u98791</li>\\n            <li>\\u83DC\\u5355\\u98792</li>\\n          </ul>\\n        \";\n      },\n      shouldBegin: function shouldBegin(e) {\n        return true;\n      },\n      // 菜单隐藏事件\n      onHide: function onHide() {\n        return true;\n      },\n      itemTypes: ['node', 'edge', 'combo']\n    };\n  }; // class-methods-use-this\n\n\n  Menu.prototype.getEvents = function () {\n    return {\n      contextmenu: 'onMenuShow'\n    };\n  };\n\n  Menu.prototype.init = function () {\n    var className = this.get('className');\n    var menu = createDom(\"<div class=\" + (className || 'g6-component-contextmenu') + \"></div>\");\n    modifyCSS(menu, {\n      top: '0px',\n      position: 'absolute',\n      visibility: 'hidden'\n    });\n    var container = this.get('container');\n\n    if (!container) {\n      container = this.get('graph').get('container');\n    }\n\n    if (isString(container)) {\n      container = document.getElementById(container);\n    }\n\n    container.appendChild(menu);\n    this.set('menu', menu);\n  };\n\n  Menu.prototype.onMenuShow = function (e) {\n    var self = this;\n    e.preventDefault();\n    e.stopPropagation();\n    var itemTypes = this.get('itemTypes');\n\n    if (!e.item) {\n      if (itemTypes.indexOf('canvas') === -1) return;\n    } else {\n      if (e.item && e.item.getType && itemTypes.indexOf(e.item.getType()) === -1) {\n        self.onMenuHide();\n        return;\n      }\n    }\n\n    var shouldBegin = this.get('shouldBegin');\n    if (!shouldBegin(e)) return;\n    var menuDom = this.get('menu');\n    var getContent = this.get('getContent');\n    var graph = this.get('graph');\n    var menu = getContent(e, graph);\n\n    if (isString(menu)) {\n      menuDom.innerHTML = menu;\n    } else {\n      menuDom.innerHTML = menu.outerHTML;\n    } // 清除之前监听的事件\n\n\n    this.removeMenuEventListener();\n    var handleMenuClick = this.get('handleMenuClick');\n\n    if (handleMenuClick) {\n      var handleMenuClickWrapper = function handleMenuClickWrapper(evt) {\n        handleMenuClick(evt.target, e.item, graph);\n      };\n\n      this.set('handleMenuClickWrapper', handleMenuClickWrapper);\n      menuDom.addEventListener('click', handleMenuClickWrapper);\n    }\n\n    var width = graph.get('width');\n    var height = graph.get('height');\n    var bbox = menuDom.getBoundingClientRect();\n    var offsetX = this.get('offsetX') || 0;\n    var offsetY = this.get('offsetY') || 0;\n    var graphTop = graph.getContainer().offsetTop;\n    var graphLeft = graph.getContainer().offsetLeft;\n    var x = e.canvasX + graphLeft + offsetX;\n    var y = e.canvasY + graphTop + offsetY; // when the menu is (part of) out of the canvas\n\n    if (x + bbox.width > width) {\n      x = e.canvasX - bbox.width - offsetX + graphLeft;\n    }\n\n    if (y + bbox.height > height) {\n      y = e.canvasY - bbox.height - offsetY + graphTop;\n    }\n\n    modifyCSS(menuDom, {\n      top: y + \"px\",\n      left: x + \"px\",\n      visibility: 'visible'\n    });\n\n    var handler = function handler(evt) {\n      self.onMenuHide();\n    }; // 如果在页面中其他任意地方进行click, 隐去菜单\n\n\n    document.body.addEventListener('click', handler);\n    this.set('handler', handler);\n  };\n\n  Menu.prototype.removeMenuEventListener = function () {\n    var handleMenuClickWrapper = this.get('handleMenuClickWrapper');\n    var handler = this.get('handler');\n\n    if (handleMenuClickWrapper) {\n      var menuDom = this.get('menu');\n      menuDom.removeEventListener('click', handleMenuClickWrapper);\n      this.set('handleMenuClickWrapper', null);\n    }\n\n    if (handler) {\n      document.body.removeEventListener('click', handler);\n    }\n  };\n\n  Menu.prototype.onMenuHide = function () {\n    var menuDom = this.get('menu');\n\n    if (menuDom) {\n      modifyCSS(menuDom, {\n        visibility: 'hidden'\n      });\n    } // 隐藏菜单后需要移除事件监听\n\n\n    this.removeMenuEventListener();\n  };\n\n  Menu.prototype.destroy = function () {\n    var menu = this.get('menu');\n    this.removeMenuEventListener();\n\n    if (menu) {\n      var container = this.get('container');\n\n      if (!container) {\n        container = this.get('graph').get('container');\n      }\n\n      if (isString(container)) {\n        container = document.getElementById(container);\n      }\n\n      container.removeChild(menu);\n    }\n  };\n\n  return Menu;\n}(Base);\n\nexport default Menu;","map":{"version":3,"sources":["C:/Users/Home/Desktop/cs-2005/node_modules/@antv/g6-plugin/es/menu/index.js"],"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","modifyCSS","createDom","isString","insertCss","Base","Menu","_super","apply","arguments","getDefaultCfgs","offsetX","offsetY","handleMenuClick","undefined","getContent","e","shouldBegin","onHide","itemTypes","getEvents","contextmenu","init","className","get","menu","top","position","visibility","container","document","getElementById","appendChild","set","onMenuShow","self","preventDefault","stopPropagation","item","indexOf","getType","onMenuHide","menuDom","graph","innerHTML","outerHTML","removeMenuEventListener","handleMenuClickWrapper","evt","target","addEventListener","width","height","bbox","getBoundingClientRect","graphTop","getContainer","offsetTop","graphLeft","offsetLeft","x","canvasX","y","canvasY","left","handler","body","removeEventListener","destroy","removeChild"],"mappings":"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","sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport { isString } from '@antv/util';\nimport insertCss from 'insert-css';\nimport Base from '../base';\ninsertCss(\"\\n  .g6-component-contextmenu {\\n    border: 1px solid #e2e2e2;\\n    border-radius: 4px;\\n    font-size: 12px;\\n    color: #545454;\\n    background-color: rgba(255, 255, 255, 0.9);\\n    padding: 10px 8px;\\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\\n  }\\n  .g6-contextmenu-ul {\\n    padding: 0;\\n    margin: 0;\\n    list-style: none;\\n  }\\n\\n\");\n\nvar Menu =\n/** @class */\nfunction (_super) {\n  __extends(Menu, _super);\n\n  function Menu() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Menu.prototype.getDefaultCfgs = function () {\n    return {\n      offsetX: 6,\n      offsetY: 6,\n      handleMenuClick: undefined,\n      // 指定菜单内容，function(e) {...}\n      getContent: function getContent(e) {\n        return \"\\n          <ul class='g6-contextmenu-ul'>\\n            <li>\\u83DC\\u5355\\u98791</li>\\n            <li>\\u83DC\\u5355\\u98792</li>\\n          </ul>\\n        \";\n      },\n      shouldBegin: function shouldBegin(e) {\n        return true;\n      },\n      // 菜单隐藏事件\n      onHide: function onHide() {\n        return true;\n      },\n      itemTypes: ['node', 'edge', 'combo']\n    };\n  }; // class-methods-use-this\n\n\n  Menu.prototype.getEvents = function () {\n    return {\n      contextmenu: 'onMenuShow'\n    };\n  };\n\n  Menu.prototype.init = function () {\n    var className = this.get('className');\n    var menu = createDom(\"<div class=\" + (className || 'g6-component-contextmenu') + \"></div>\");\n    modifyCSS(menu, {\n      top: '0px',\n      position: 'absolute',\n      visibility: 'hidden'\n    });\n    var container = this.get('container');\n\n    if (!container) {\n      container = this.get('graph').get('container');\n    }\n\n    if (isString(container)) {\n      container = document.getElementById(container);\n    }\n\n    container.appendChild(menu);\n    this.set('menu', menu);\n  };\n\n  Menu.prototype.onMenuShow = function (e) {\n    var self = this;\n    e.preventDefault();\n    e.stopPropagation();\n    var itemTypes = this.get('itemTypes');\n\n    if (!e.item) {\n      if (itemTypes.indexOf('canvas') === -1) return;\n    } else {\n      if (e.item && e.item.getType && itemTypes.indexOf(e.item.getType()) === -1) {\n        self.onMenuHide();\n        return;\n      }\n    }\n\n    var shouldBegin = this.get('shouldBegin');\n    if (!shouldBegin(e)) return;\n    var menuDom = this.get('menu');\n    var getContent = this.get('getContent');\n    var graph = this.get('graph');\n    var menu = getContent(e, graph);\n\n    if (isString(menu)) {\n      menuDom.innerHTML = menu;\n    } else {\n      menuDom.innerHTML = menu.outerHTML;\n    } // 清除之前监听的事件\n\n\n    this.removeMenuEventListener();\n    var handleMenuClick = this.get('handleMenuClick');\n\n    if (handleMenuClick) {\n      var handleMenuClickWrapper = function handleMenuClickWrapper(evt) {\n        handleMenuClick(evt.target, e.item, graph);\n      };\n\n      this.set('handleMenuClickWrapper', handleMenuClickWrapper);\n      menuDom.addEventListener('click', handleMenuClickWrapper);\n    }\n\n    var width = graph.get('width');\n    var height = graph.get('height');\n    var bbox = menuDom.getBoundingClientRect();\n    var offsetX = this.get('offsetX') || 0;\n    var offsetY = this.get('offsetY') || 0;\n    var graphTop = graph.getContainer().offsetTop;\n    var graphLeft = graph.getContainer().offsetLeft;\n    var x = e.canvasX + graphLeft + offsetX;\n    var y = e.canvasY + graphTop + offsetY; // when the menu is (part of) out of the canvas\n\n    if (x + bbox.width > width) {\n      x = e.canvasX - bbox.width - offsetX + graphLeft;\n    }\n\n    if (y + bbox.height > height) {\n      y = e.canvasY - bbox.height - offsetY + graphTop;\n    }\n\n    modifyCSS(menuDom, {\n      top: y + \"px\",\n      left: x + \"px\",\n      visibility: 'visible'\n    });\n\n    var handler = function handler(evt) {\n      self.onMenuHide();\n    }; // 如果在页面中其他任意地方进行click, 隐去菜单\n\n\n    document.body.addEventListener('click', handler);\n    this.set('handler', handler);\n  };\n\n  Menu.prototype.removeMenuEventListener = function () {\n    var handleMenuClickWrapper = this.get('handleMenuClickWrapper');\n    var handler = this.get('handler');\n\n    if (handleMenuClickWrapper) {\n      var menuDom = this.get('menu');\n      menuDom.removeEventListener('click', handleMenuClickWrapper);\n      this.set('handleMenuClickWrapper', null);\n    }\n\n    if (handler) {\n      document.body.removeEventListener('click', handler);\n    }\n  };\n\n  Menu.prototype.onMenuHide = function () {\n    var menuDom = this.get('menu');\n\n    if (menuDom) {\n      modifyCSS(menuDom, {\n        visibility: 'hidden'\n      });\n    } // 隐藏菜单后需要移除事件监听\n\n\n    this.removeMenuEventListener();\n  };\n\n  Menu.prototype.destroy = function () {\n    var menu = this.get('menu');\n    this.removeMenuEventListener();\n\n    if (menu) {\n      var container = this.get('container');\n\n      if (!container) {\n        container = this.get('graph').get('container');\n      }\n\n      if (isString(container)) {\n        container = document.getElementById(container);\n      }\n\n      container.removeChild(menu);\n    }\n  };\n\n  return Menu;\n}(Base);\n\nexport default Menu;"]},"metadata":{},"sourceType":"module"}