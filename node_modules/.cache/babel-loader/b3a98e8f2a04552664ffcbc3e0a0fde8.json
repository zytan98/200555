{"ast":null,"code":"import { size, valuesOfKey } from '@antv/util';\nimport { isBetween } from '../../../utils';\n/**\n * 右侧 View 进行 slider 过滤\n * 由于双轴图是多 View , 需要监听左侧 Slider 的 change 事件来同步右侧 View\n * @param { View } view 右侧视图\n * @param { number[] } sliderValue 滑块当前值\n * @returns void\n */\n\nexport var doSliderFilter = function (view, sliderValue) {\n  var min = sliderValue[0],\n      max = sliderValue[1];\n  var data = view.getOptions().data;\n  var xScale = view.getXScale();\n  var dataSize = size(data);\n\n  if (!xScale || !dataSize) {\n    return;\n  }\n\n  var isHorizontal = true;\n  var values = valuesOfKey(data, xScale.field);\n  var xValues = isHorizontal ? values : values.reverse();\n  var xTickCount = size(xValues);\n  var minIndex = Math.floor(min * (xTickCount - 1));\n  var maxIndex = Math.floor(max * (xTickCount - 1)); // 增加 x 轴的过滤器\n\n  view.filter(xScale.field, function (value) {\n    var idx = xValues.indexOf(value);\n    return idx > -1 ? isBetween(idx, minIndex, maxIndex) : true;\n  });\n  view.render(true);\n};","map":{"version":3,"sources":["../../../../src/plots/dual-axes/util/render-sider.ts"],"names":[],"mappings":"AACA,SAAS,IAAT,EAAe,WAAf,QAAkC,YAAlC;AACA,SAAS,SAAT,QAA0B,gBAA1B;AAEA;;;;;;AAMG;;AACH,OAAO,IAAM,cAAc,GAAG,UAAC,IAAD,EAAa,WAAb,EAA0C;AAC/D,MAAA,GAAG,GAAS,WAAW,CAApB,CAAoB,CAAvB;AAAA,MAAK,GAAG,GAAI,WAAW,CAAf,CAAe,CAAvB;AACP,MAAM,IAAI,GAAG,IAAI,CAAC,UAAL,GAAkB,IAA/B;AACA,MAAM,MAAM,GAAG,IAAI,CAAC,SAAL,EAAf;AACA,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAD,CAArB;;AACA,MAAI,CAAC,MAAD,IAAW,CAAC,QAAhB,EAA0B;AACxB;AACD;;AACD,MAAM,YAAY,GAAG,IAArB;AACA,MAAM,MAAM,GAAG,WAAW,CAAC,IAAD,EAAO,MAAM,CAAC,KAAd,CAA1B;AACA,MAAM,OAAO,GAAG,YAAY,GAAG,MAAH,GAAY,MAAM,CAAC,OAAP,EAAxC;AACA,MAAM,UAAU,GAAG,IAAI,CAAC,OAAD,CAAvB;AACA,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAL,CAAW,GAAG,IAAI,UAAU,GAAG,CAAjB,CAAd,CAAjB;AACA,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAL,CAAW,GAAG,IAAI,UAAU,GAAG,CAAjB,CAAd,CAAjB,CAbsE,CAetE;;AACA,EAAA,IAAI,CAAC,MAAL,CAAY,MAAM,CAAC,KAAnB,EAA0B,UAAC,KAAD,EAAW;AACnC,QAAM,GAAG,GAAW,OAAO,CAAC,OAAR,CAAgB,KAAhB,CAApB;AACA,WAAO,GAAG,GAAG,CAAC,CAAP,GAAW,SAAS,CAAC,GAAD,EAAM,QAAN,EAAgB,QAAhB,CAApB,GAAgD,IAAvD;AACD,GAHD;AAIA,EAAA,IAAI,CAAC,MAAL,CAAY,IAAZ;AACD,CArBM","sourcesContent":["import { View } from '@antv/g2';\nimport { size, valuesOfKey } from '@antv/util';\nimport { isBetween } from '../../../utils';\n\n/**\n * 右侧 View 进行 slider 过滤\n * 由于双轴图是多 View , 需要监听左侧 Slider 的 change 事件来同步右侧 View\n * @param { View } view 右侧视图\n * @param { number[] } sliderValue 滑块当前值\n * @returns void\n */\nexport const doSliderFilter = (view: View, sliderValue: [number, number]) => {\n  const [min, max] = sliderValue;\n  const data = view.getOptions().data;\n  const xScale = view.getXScale();\n  const dataSize = size(data);\n  if (!xScale || !dataSize) {\n    return;\n  }\n  const isHorizontal = true;\n  const values = valuesOfKey(data, xScale.field);\n  const xValues = isHorizontal ? values : values.reverse();\n  const xTickCount = size(xValues);\n  const minIndex = Math.floor(min * (xTickCount - 1));\n  const maxIndex = Math.floor(max * (xTickCount - 1));\n\n  // 增加 x 轴的过滤器\n  view.filter(xScale.field, (value: any) => {\n    const idx: number = xValues.indexOf(value);\n    return idx > -1 ? isBetween(idx, minIndex, maxIndex) : true;\n  });\n  view.render(true);\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}