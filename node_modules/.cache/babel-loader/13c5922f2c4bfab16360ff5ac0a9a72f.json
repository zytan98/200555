{"ast":null,"code":"import { registerInteraction, registerAction } from '@antv/g2';\nimport { get, isArray } from '@antv/util';\nimport { DrillDownAction } from './actions/drill-down';\n/**\n * 判断是否为父节点\n */\n\nexport function isParentNode(context) {\n  var data = get(context, ['event', 'data', 'data'], {});\n  return isArray(data.children) && data.children.length > 0;\n}\n/**\n * 判断是否在中心\n */\n\nfunction inCenter(context) {\n  var coordinate = context.view.getCoordinate();\n  var innerRadius = coordinate.innerRadius;\n\n  if (innerRadius) {\n    var _a = context.event,\n        x = _a.x,\n        y = _a.y;\n    var _b = coordinate.center,\n        centerX = _b.x,\n        centerY = _b.y;\n    var r = coordinate.getRadius() * innerRadius;\n    var distance = Math.sqrt(Math.pow(centerX - x, 2) + Math.pow(centerY - y, 2));\n    return distance < r;\n  }\n\n  return false;\n}\n\nregisterAction('drill-down-action', DrillDownAction);\nregisterInteraction('drill-down', {\n  showEnable: [{\n    trigger: 'element:mouseenter',\n    action: 'cursor:pointer',\n    isEnable: isParentNode\n  }, {\n    trigger: 'element:mouseleave',\n    action: 'cursor:default'\n  }, // 中心处，肯定会触发 element:mouseleave 操作\n  {\n    trigger: 'element:mouseleave',\n    action: 'cursor:pointer',\n    isEnable: inCenter\n  }],\n  start: [{\n    trigger: 'element:click',\n    isEnable: isParentNode,\n    action: ['drill-down-action:click']\n  }, {\n    trigger: 'afterchangesize',\n    action: ['drill-down-action:resetPosition']\n  }, {\n    // 点击中心，返回上一层\n    trigger: 'click',\n    isEnable: inCenter,\n    action: ['drill-down-action:back']\n  }]\n});","map":{"version":3,"sources":["../../src/interactions/drill-down.ts"],"names":[],"mappings":"AAAA,SAAS,mBAAT,EAA8B,cAA9B,QAAoD,UAApD;AACA,SAAS,GAAT,EAAc,OAAd,QAA6B,YAA7B;AACA,SAAS,eAAT,QAAgC,sBAAhC;AAEA;;AAEG;;AACH,OAAM,SAAU,YAAV,CAAuB,OAAvB,EAA8B;AAClC,MAAM,IAAI,GAAG,GAAG,CAAC,OAAD,EAAU,CAAC,OAAD,EAAU,MAAV,EAAkB,MAAlB,CAAV,EAAqC,EAArC,CAAhB;AACA,SAAO,OAAO,CAAC,IAAI,CAAC,QAAN,CAAP,IAA0B,IAAI,CAAC,QAAL,CAAc,MAAd,GAAuB,CAAxD;AACD;AAED;;AAEG;;AACH,SAAS,QAAT,CAAkB,OAAlB,EAAyB;AACvB,MAAM,UAAU,GAAG,OAAO,CAAC,IAAR,CAAa,aAAb,EAAnB;AACQ,MAAA,WAAW,GAAK,UAAU,CAAf,WAAX;;AACR,MAAI,WAAJ,EAAiB;AACT,QAAA,EAAA,GAAW,OAAO,CAAC,KAAnB;AAAA,QAAE,CAAC,GAAA,EAAA,CAAA,CAAH;AAAA,QAAK,CAAC,GAAA,EAAA,CAAA,CAAN;AACA,QAAA,EAAA,GAA6B,UAAU,CAAC,MAAxC;AAAA,QAAK,OAAO,GAAA,EAAA,CAAA,CAAZ;AAAA,QAAiB,OAAO,GAAA,EAAA,CAAA,CAAxB;AACN,QAAM,CAAC,GAAG,UAAU,CAAC,SAAX,KAAyB,WAAnC;AACA,QAAM,QAAQ,GAAG,IAAI,CAAC,IAAL,CAAU,IAAA,CAAA,GAAA,CAAC,OAAO,GAAG,CAAX,EAAiB,CAAjB,IAAqB,IAAA,CAAA,GAAA,CAAC,OAAO,GAAG,CAAX,EAAiB,CAAjB,CAA/B,CAAjB;AACA,WAAO,QAAQ,GAAG,CAAlB;AACD;;AACD,SAAO,KAAP;AACD;;AAED,cAAc,CAAC,mBAAD,EAAsB,eAAtB,CAAd;AACA,mBAAmB,CAAC,YAAD,EAAe;AAChC,EAAA,UAAU,EAAE,CACV;AAAE,IAAA,OAAO,EAAE,oBAAX;AAAiC,IAAA,MAAM,EAAE,gBAAzC;AAA2D,IAAA,QAAQ,EAAE;AAArE,GADU,EAEV;AAAE,IAAA,OAAO,EAAE,oBAAX;AAAiC,IAAA,MAAM,EAAE;AAAzC,GAFU,EAGV;AACA;AAAE,IAAA,OAAO,EAAE,oBAAX;AAAiC,IAAA,MAAM,EAAE,gBAAzC;AAA2D,IAAA,QAAQ,EAAE;AAArE,GAJU,CADoB;AAOhC,EAAA,KAAK,EAAE,CACL;AACE,IAAA,OAAO,EAAE,eADX;AAEE,IAAA,QAAQ,EAAE,YAFZ;AAGE,IAAA,MAAM,EAAE,CAAC,yBAAD;AAHV,GADK,EAML;AACE,IAAA,OAAO,EAAE,iBADX;AAEE,IAAA,MAAM,EAAE,CAAC,iCAAD;AAFV,GANK,EAUL;AACE;AACA,IAAA,OAAO,EAAE,OAFX;AAGE,IAAA,QAAQ,EAAE,QAHZ;AAIE,IAAA,MAAM,EAAE,CAAC,wBAAD;AAJV,GAVK;AAPyB,CAAf,CAAnB","sourcesContent":["import { registerInteraction, registerAction } from '@antv/g2';\nimport { get, isArray } from '@antv/util';\nimport { DrillDownAction } from './actions/drill-down';\n\n/**\n * 判断是否为父节点\n */\nexport function isParentNode(context) {\n  const data = get(context, ['event', 'data', 'data'], {});\n  return isArray(data.children) && data.children.length > 0;\n}\n\n/**\n * 判断是否在中心\n */\nfunction inCenter(context) {\n  const coordinate = context.view.getCoordinate();\n  const { innerRadius } = coordinate;\n  if (innerRadius) {\n    const { x, y } = context.event;\n    const { x: centerX, y: centerY } = coordinate.center;\n    const r = coordinate.getRadius() * innerRadius;\n    const distance = Math.sqrt((centerX - x) ** 2 + (centerY - y) ** 2);\n    return distance < r;\n  }\n  return false;\n}\n\nregisterAction('drill-down-action', DrillDownAction);\nregisterInteraction('drill-down', {\n  showEnable: [\n    { trigger: 'element:mouseenter', action: 'cursor:pointer', isEnable: isParentNode },\n    { trigger: 'element:mouseleave', action: 'cursor:default' },\n    // 中心处，肯定会触发 element:mouseleave 操作\n    { trigger: 'element:mouseleave', action: 'cursor:pointer', isEnable: inCenter },\n  ],\n  start: [\n    {\n      trigger: 'element:click',\n      isEnable: isParentNode,\n      action: ['drill-down-action:click'],\n    },\n    {\n      trigger: 'afterchangesize',\n      action: ['drill-down-action:resetPosition'],\n    },\n    {\n      // 点击中心，返回上一层\n      trigger: 'click',\n      isEnable: inCenter,\n      action: ['drill-down-action:back'],\n    },\n  ],\n});\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}