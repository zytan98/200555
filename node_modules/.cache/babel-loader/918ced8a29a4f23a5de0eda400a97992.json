{"ast":null,"code":"import { each } from '@antv/util';\nvar DEFAULT_TRIGGER = 'shift';\nvar ALLOW_EVENTS = ['shift', 'ctrl', 'alt', 'control'];\nexport default {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      multiple: true,\n      trigger: DEFAULT_TRIGGER,\n      selectedState: 'selected'\n    };\n  },\n  getEvents: function getEvents() {\n    var self = this; // 检测输入是否合法\n\n    if (!(ALLOW_EVENTS.indexOf(self.trigger.toLowerCase()) > -1)) {\n      self.trigger = DEFAULT_TRIGGER; // eslint-disable-next-line no-console\n\n      console.warn(\"Behavior brush-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'\");\n    }\n\n    if (!self.multiple) {\n      return {\n        'node:click': 'onClick',\n        'combo:click': 'onClick',\n        'canvas:click': 'onCanvasClick'\n      };\n    }\n\n    return {\n      'node:click': 'onClick',\n      'combo:click': 'onClick',\n      'canvas:click': 'onCanvasClick',\n      keyup: 'onKeyUp',\n      keydown: 'onKeyDown'\n    };\n  },\n  onClick: function onClick(evt) {\n    var self = this;\n    var item = evt.item;\n\n    if (!item || item.destroyed) {\n      return;\n    }\n\n    var type = item.getType();\n    var graph = self.graph,\n        keydown = self.keydown,\n        multiple = self.multiple,\n        shouldUpdate = self.shouldUpdate,\n        shouldBegin = self.shouldBegin;\n\n    if (!shouldBegin.call(self, evt)) {\n      return;\n    } // allow to select multiple nodes but did not press a key || do not allow the select multiple nodes\n\n\n    if (!keydown || !multiple) {\n      var selected = graph.findAllByState(type, self.selectedState);\n      each(selected, function (combo) {\n        if (combo !== item) {\n          graph.setItemState(combo, self.selectedState, false);\n        }\n      });\n    }\n\n    if (item.hasState(self.selectedState)) {\n      if (shouldUpdate.call(self, evt)) {\n        graph.setItemState(item, self.selectedState, false);\n      }\n\n      var selectedNodes = graph.findAllByState('node', self.selectedState);\n      var selectedCombos = graph.findAllByState('combo', self.selectedState);\n      graph.emit('nodeselectchange', {\n        target: item,\n        selectedItems: {\n          nodes: selectedNodes,\n          combos: selectedCombos\n        },\n        select: false\n      });\n    } else {\n      if (shouldUpdate.call(self, evt)) {\n        graph.setItemState(item, self.selectedState, true);\n      }\n\n      var selectedNodes = graph.findAllByState('node', self.selectedState);\n      var selectedCombos = graph.findAllByState('combo', self.selectedState);\n      graph.emit('nodeselectchange', {\n        target: item,\n        selectedItems: {\n          nodes: selectedNodes,\n          combos: selectedCombos\n        },\n        select: true\n      });\n    }\n  },\n  onCanvasClick: function onCanvasClick() {\n    var _this = this;\n\n    var graph = this.graph;\n    var selected = graph.findAllByState('node', this.selectedState);\n    each(selected, function (node) {\n      graph.setItemState(node, _this.selectedState, false);\n    });\n    var selectedCombos = graph.findAllByState('combo', this.selectedState);\n    each(selectedCombos, function (combo) {\n      graph.setItemState(combo, _this.selectedState, false);\n    });\n    graph.emit('nodeselectchange', {\n      selectedItems: {\n        nodes: [],\n        edges: [],\n        combos: []\n      },\n      select: false\n    });\n  },\n  onKeyDown: function onKeyDown(e) {\n    var self = this;\n    var code = e.key;\n\n    if (!code) {\n      return;\n    }\n\n    if (code.toLowerCase() === this.trigger.toLowerCase() || code.toLowerCase() === 'control') {\n      self.keydown = true;\n    } else {\n      self.keydown = false;\n    }\n  },\n  onKeyUp: function onKeyUp() {\n    var self = this;\n    self.keydown = false;\n  }\n};","map":{"version":3,"sources":["C:/Users/Home/Desktop/cs-2005/node_modules/@antv/g6-pc/es/behavior/click-select.js"],"names":["each","DEFAULT_TRIGGER","ALLOW_EVENTS","getDefaultCfg","multiple","trigger","selectedState","getEvents","self","indexOf","toLowerCase","console","warn","keyup","keydown","onClick","evt","item","destroyed","type","getType","graph","shouldUpdate","shouldBegin","call","selected","findAllByState","combo","setItemState","hasState","selectedNodes","selectedCombos","emit","target","selectedItems","nodes","combos","select","onCanvasClick","_this","node","edges","onKeyDown","e","code","key","onKeyUp"],"mappings":"AAAA,SAASA,IAAT,QAAqB,YAArB;AACA,IAAIC,eAAe,GAAG,OAAtB;AACA,IAAIC,YAAY,GAAG,CAAC,OAAD,EAAU,MAAV,EAAkB,KAAlB,EAAyB,SAAzB,CAAnB;AACA,eAAe;AACbC,EAAAA,aAAa,EAAE,SAASA,aAAT,GAAyB;AACtC,WAAO;AACLC,MAAAA,QAAQ,EAAE,IADL;AAELC,MAAAA,OAAO,EAAEJ,eAFJ;AAGLK,MAAAA,aAAa,EAAE;AAHV,KAAP;AAKD,GAPY;AAQbC,EAAAA,SAAS,EAAE,SAASA,SAAT,GAAqB;AAC9B,QAAIC,IAAI,GAAG,IAAX,CAD8B,CACb;;AAEjB,QAAI,EAAEN,YAAY,CAACO,OAAb,CAAqBD,IAAI,CAACH,OAAL,CAAaK,WAAb,EAArB,IAAmD,CAAC,CAAtD,CAAJ,EAA8D;AAC5DF,MAAAA,IAAI,CAACH,OAAL,GAAeJ,eAAf,CAD4D,CAC5B;;AAEhCU,MAAAA,OAAO,CAACC,IAAR,CAAa,yEAAb;AACD;;AAED,QAAI,CAACJ,IAAI,CAACJ,QAAV,EAAoB;AAClB,aAAO;AACL,sBAAc,SADT;AAEL,uBAAe,SAFV;AAGL,wBAAgB;AAHX,OAAP;AAKD;;AAED,WAAO;AACL,oBAAc,SADT;AAEL,qBAAe,SAFV;AAGL,sBAAgB,eAHX;AAILS,MAAAA,KAAK,EAAE,SAJF;AAKLC,MAAAA,OAAO,EAAE;AALJ,KAAP;AAOD,GAhCY;AAiCbC,EAAAA,OAAO,EAAE,SAASA,OAAT,CAAiBC,GAAjB,EAAsB;AAC7B,QAAIR,IAAI,GAAG,IAAX;AACA,QAAIS,IAAI,GAAGD,GAAG,CAACC,IAAf;;AAEA,QAAI,CAACA,IAAD,IAASA,IAAI,CAACC,SAAlB,EAA6B;AAC3B;AACD;;AAED,QAAIC,IAAI,GAAGF,IAAI,CAACG,OAAL,EAAX;AACA,QAAIC,KAAK,GAAGb,IAAI,CAACa,KAAjB;AAAA,QACIP,OAAO,GAAGN,IAAI,CAACM,OADnB;AAAA,QAEIV,QAAQ,GAAGI,IAAI,CAACJ,QAFpB;AAAA,QAGIkB,YAAY,GAAGd,IAAI,CAACc,YAHxB;AAAA,QAIIC,WAAW,GAAGf,IAAI,CAACe,WAJvB;;AAMA,QAAI,CAACA,WAAW,CAACC,IAAZ,CAAiBhB,IAAjB,EAAuBQ,GAAvB,CAAL,EAAkC;AAChC;AACD,KAjB4B,CAiB3B;;;AAGF,QAAI,CAACF,OAAD,IAAY,CAACV,QAAjB,EAA2B;AACzB,UAAIqB,QAAQ,GAAGJ,KAAK,CAACK,cAAN,CAAqBP,IAArB,EAA2BX,IAAI,CAACF,aAAhC,CAAf;AACAN,MAAAA,IAAI,CAACyB,QAAD,EAAW,UAAUE,KAAV,EAAiB;AAC9B,YAAIA,KAAK,KAAKV,IAAd,EAAoB;AAClBI,UAAAA,KAAK,CAACO,YAAN,CAAmBD,KAAnB,EAA0BnB,IAAI,CAACF,aAA/B,EAA8C,KAA9C;AACD;AACF,OAJG,CAAJ;AAKD;;AAED,QAAIW,IAAI,CAACY,QAAL,CAAcrB,IAAI,CAACF,aAAnB,CAAJ,EAAuC;AACrC,UAAIgB,YAAY,CAACE,IAAb,CAAkBhB,IAAlB,EAAwBQ,GAAxB,CAAJ,EAAkC;AAChCK,QAAAA,KAAK,CAACO,YAAN,CAAmBX,IAAnB,EAAyBT,IAAI,CAACF,aAA9B,EAA6C,KAA7C;AACD;;AAED,UAAIwB,aAAa,GAAGT,KAAK,CAACK,cAAN,CAAqB,MAArB,EAA6BlB,IAAI,CAACF,aAAlC,CAApB;AACA,UAAIyB,cAAc,GAAGV,KAAK,CAACK,cAAN,CAAqB,OAArB,EAA8BlB,IAAI,CAACF,aAAnC,CAArB;AACAe,MAAAA,KAAK,CAACW,IAAN,CAAW,kBAAX,EAA+B;AAC7BC,QAAAA,MAAM,EAAEhB,IADqB;AAE7BiB,QAAAA,aAAa,EAAE;AACbC,UAAAA,KAAK,EAAEL,aADM;AAEbM,UAAAA,MAAM,EAAEL;AAFK,SAFc;AAM7BM,QAAAA,MAAM,EAAE;AANqB,OAA/B;AAQD,KAfD,MAeO;AACL,UAAIf,YAAY,CAACE,IAAb,CAAkBhB,IAAlB,EAAwBQ,GAAxB,CAAJ,EAAkC;AAChCK,QAAAA,KAAK,CAACO,YAAN,CAAmBX,IAAnB,EAAyBT,IAAI,CAACF,aAA9B,EAA6C,IAA7C;AACD;;AAED,UAAIwB,aAAa,GAAGT,KAAK,CAACK,cAAN,CAAqB,MAArB,EAA6BlB,IAAI,CAACF,aAAlC,CAApB;AACA,UAAIyB,cAAc,GAAGV,KAAK,CAACK,cAAN,CAAqB,OAArB,EAA8BlB,IAAI,CAACF,aAAnC,CAArB;AACAe,MAAAA,KAAK,CAACW,IAAN,CAAW,kBAAX,EAA+B;AAC7BC,QAAAA,MAAM,EAAEhB,IADqB;AAE7BiB,QAAAA,aAAa,EAAE;AACbC,UAAAA,KAAK,EAAEL,aADM;AAEbM,UAAAA,MAAM,EAAEL;AAFK,SAFc;AAM7BM,QAAAA,MAAM,EAAE;AANqB,OAA/B;AAQD;AACF,GA7FY;AA8FbC,EAAAA,aAAa,EAAE,SAASA,aAAT,GAAyB;AACtC,QAAIC,KAAK,GAAG,IAAZ;;AAEA,QAAIlB,KAAK,GAAG,KAAKA,KAAjB;AACA,QAAII,QAAQ,GAAGJ,KAAK,CAACK,cAAN,CAAqB,MAArB,EAA6B,KAAKpB,aAAlC,CAAf;AACAN,IAAAA,IAAI,CAACyB,QAAD,EAAW,UAAUe,IAAV,EAAgB;AAC7BnB,MAAAA,KAAK,CAACO,YAAN,CAAmBY,IAAnB,EAAyBD,KAAK,CAACjC,aAA/B,EAA8C,KAA9C;AACD,KAFG,CAAJ;AAGA,QAAIyB,cAAc,GAAGV,KAAK,CAACK,cAAN,CAAqB,OAArB,EAA8B,KAAKpB,aAAnC,CAArB;AACAN,IAAAA,IAAI,CAAC+B,cAAD,EAAiB,UAAUJ,KAAV,EAAiB;AACpCN,MAAAA,KAAK,CAACO,YAAN,CAAmBD,KAAnB,EAA0BY,KAAK,CAACjC,aAAhC,EAA+C,KAA/C;AACD,KAFG,CAAJ;AAGAe,IAAAA,KAAK,CAACW,IAAN,CAAW,kBAAX,EAA+B;AAC7BE,MAAAA,aAAa,EAAE;AACbC,QAAAA,KAAK,EAAE,EADM;AAEbM,QAAAA,KAAK,EAAE,EAFM;AAGbL,QAAAA,MAAM,EAAE;AAHK,OADc;AAM7BC,MAAAA,MAAM,EAAE;AANqB,KAA/B;AAQD,GAlHY;AAmHbK,EAAAA,SAAS,EAAE,SAASA,SAAT,CAAmBC,CAAnB,EAAsB;AAC/B,QAAInC,IAAI,GAAG,IAAX;AACA,QAAIoC,IAAI,GAAGD,CAAC,CAACE,GAAb;;AAEA,QAAI,CAACD,IAAL,EAAW;AACT;AACD;;AAED,QAAIA,IAAI,CAAClC,WAAL,OAAuB,KAAKL,OAAL,CAAaK,WAAb,EAAvB,IAAqDkC,IAAI,CAAClC,WAAL,OAAuB,SAAhF,EAA2F;AACzFF,MAAAA,IAAI,CAACM,OAAL,GAAe,IAAf;AACD,KAFD,MAEO;AACLN,MAAAA,IAAI,CAACM,OAAL,GAAe,KAAf;AACD;AACF,GAhIY;AAiIbgC,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1B,QAAItC,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAACM,OAAL,GAAe,KAAf;AACD;AApIY,CAAf","sourcesContent":["import { each } from '@antv/util';\nvar DEFAULT_TRIGGER = 'shift';\nvar ALLOW_EVENTS = ['shift', 'ctrl', 'alt', 'control'];\nexport default {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      multiple: true,\n      trigger: DEFAULT_TRIGGER,\n      selectedState: 'selected'\n    };\n  },\n  getEvents: function getEvents() {\n    var self = this; // 检测输入是否合法\n\n    if (!(ALLOW_EVENTS.indexOf(self.trigger.toLowerCase()) > -1)) {\n      self.trigger = DEFAULT_TRIGGER; // eslint-disable-next-line no-console\n\n      console.warn(\"Behavior brush-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'\");\n    }\n\n    if (!self.multiple) {\n      return {\n        'node:click': 'onClick',\n        'combo:click': 'onClick',\n        'canvas:click': 'onCanvasClick'\n      };\n    }\n\n    return {\n      'node:click': 'onClick',\n      'combo:click': 'onClick',\n      'canvas:click': 'onCanvasClick',\n      keyup: 'onKeyUp',\n      keydown: 'onKeyDown'\n    };\n  },\n  onClick: function onClick(evt) {\n    var self = this;\n    var item = evt.item;\n\n    if (!item || item.destroyed) {\n      return;\n    }\n\n    var type = item.getType();\n    var graph = self.graph,\n        keydown = self.keydown,\n        multiple = self.multiple,\n        shouldUpdate = self.shouldUpdate,\n        shouldBegin = self.shouldBegin;\n\n    if (!shouldBegin.call(self, evt)) {\n      return;\n    } // allow to select multiple nodes but did not press a key || do not allow the select multiple nodes\n\n\n    if (!keydown || !multiple) {\n      var selected = graph.findAllByState(type, self.selectedState);\n      each(selected, function (combo) {\n        if (combo !== item) {\n          graph.setItemState(combo, self.selectedState, false);\n        }\n      });\n    }\n\n    if (item.hasState(self.selectedState)) {\n      if (shouldUpdate.call(self, evt)) {\n        graph.setItemState(item, self.selectedState, false);\n      }\n\n      var selectedNodes = graph.findAllByState('node', self.selectedState);\n      var selectedCombos = graph.findAllByState('combo', self.selectedState);\n      graph.emit('nodeselectchange', {\n        target: item,\n        selectedItems: {\n          nodes: selectedNodes,\n          combos: selectedCombos\n        },\n        select: false\n      });\n    } else {\n      if (shouldUpdate.call(self, evt)) {\n        graph.setItemState(item, self.selectedState, true);\n      }\n\n      var selectedNodes = graph.findAllByState('node', self.selectedState);\n      var selectedCombos = graph.findAllByState('combo', self.selectedState);\n      graph.emit('nodeselectchange', {\n        target: item,\n        selectedItems: {\n          nodes: selectedNodes,\n          combos: selectedCombos\n        },\n        select: true\n      });\n    }\n  },\n  onCanvasClick: function onCanvasClick() {\n    var _this = this;\n\n    var graph = this.graph;\n    var selected = graph.findAllByState('node', this.selectedState);\n    each(selected, function (node) {\n      graph.setItemState(node, _this.selectedState, false);\n    });\n    var selectedCombos = graph.findAllByState('combo', this.selectedState);\n    each(selectedCombos, function (combo) {\n      graph.setItemState(combo, _this.selectedState, false);\n    });\n    graph.emit('nodeselectchange', {\n      selectedItems: {\n        nodes: [],\n        edges: [],\n        combos: []\n      },\n      select: false\n    });\n  },\n  onKeyDown: function onKeyDown(e) {\n    var self = this;\n    var code = e.key;\n\n    if (!code) {\n      return;\n    }\n\n    if (code.toLowerCase() === this.trigger.toLowerCase() || code.toLowerCase() === 'control') {\n      self.keydown = true;\n    } else {\n      self.keydown = false;\n    }\n  },\n  onKeyUp: function onKeyUp() {\n    var self = this;\n    self.keydown = false;\n  }\n};"]},"metadata":{},"sourceType":"module"}